# SchoolSiteNewEditor
## Добавьте любой код на страницы сайта школы с новым редактором

## Данный проект позволяет обновлять код страницы школьного сайта, на которой включен новый редактор.

--- 

## Установка (производится один раз)
1. Устанавливаем на компьютер Python [https://www.python.org/](https://www.python.org/)

2. Клонируем репозиторий

    ``` shell
   https://github.com/dzenbots/SchoolSiteNewEditor.git
   ```
   или скачиваем архив и распаковываем его в отдельную папку
3. В консоли переходим в папку проекта
4. Устанавливаем и активируем виртуальное окружение

    ```shell
    python -m venv venv
    ```
   Если появилась ошибка что pyhton не найден:

    ```shell
   python3 -m venv venv
   ```

    Для Windows:
    ```shell
    venv\Scripts\activate.bat
    ```
    Для Linux:
    ```shell
    source venv/bin/activate
    ```

5. Устанавливаем зависимости:

    ```shell
   pip install -r requremints.txt
   ```
   
6. Открываем файл .env любым текстовым редактором и меняем значения переменных:

    ```
    SCHOOL_SITE_URL=https://***********.mskobr.ru # без / в конце
    LOGIN=************** # Логин Маяка
    PASSWORD=*********** # Пароль Маяка
    EKIS_CODE=********* # Код ОО в ЕКИС
    ```

## Использование (при каждом внесении изменения на страницу)

1. Изменяем содержимое файла ``new_content.html`` - кладем в него html-код, который будет отображаться на желаемой странице. 
    
   Откуда взять код? - Либо написать самостоятельно, либо создать его старым редактором (например, создать новость старым редактором, нажать в редакторе кнопку ``Источник`` и скопировать оттуда получившийся код) и скопировать в файл ``new_content.html``.
2. Файл ``.env.dist`` переименовать или скопировать в файл ``.env``.
3. В файле ``.env`` изменить значение переменной ``PAGE_PATH`` (необходимо указать полный путь без доменного имени до желаемой страницы с новым редактором)

    ```
    PAGE_PATH=/proekty/nashi-proekty/testovaya-stranitsa # Путь до редактируемой страницы без домена
    ```

> [!IMPORTANT]
> Важно! Перед запуском программы на желаемой странице должен присутствовать один текстовый блок, он и будет изменяться. Если на странице больше блоков - будет изменен только самый первый, остальные изменяться не будут. Если первый блок не текстовый, возможно ничего не изменится. Поэтому лучше удалить весь старый контент из нового редактора и оставить только один текстовый блок

3. Запускаем программу

    ```shell
    python app.py
    ```
   
4. Проверяем результат работы на странице сайта
